Practice


Написать программу на java, которая будет выводить в стандартный поток вывода координаты запрашиваемого адреса. Можно пользоваться любыми библиотеками Http Clients.

Ниже приведен пример использования утилиты HTTPie для получения необходимого результата. (Можно сначала посмотреть поведение браузера).

1. Выполнить GET-запрос по адресу https://yandex.ru/maps (нужные request headers можно взять из браузера, зайдя на https://yandex.ru/maps).

Из тела ответа извлечь значение csrf-токена, которое хранится в виде"csrfToken":"[^\"]++", пример:

“csrfToken”:”1abf7a87fd70d89d52a11e8f7dc93758f3030fec:1456743396185”

(можно найти обычным поиском по ключу “csrfToken”)

 

 2. Из header-ов ответа получить значение yandexuid, пример:

set-cookie: yandexuid=1656215521456743587

 

 3. Выполнить GET-запрос к ресурсу:

https://yandex.ru/maps/api/search?text=Ижевск, карла маркса, 246&lang=ru_RU&csrfToken=<csrfToken>

передав вместо <csrfToken>-значение токена, полученное на шаге 3,

а также в headers запроса передать Cookie: yandexuid=<yandexuid>,

где <yandexuid>- значение yandexuid, полученное на шаге 4.

В качестве значения параметра text укажите свой текст, например, улицу где живете

 

 4. В полученном теле ответа найти координату указанного адреса.

 Пример: 

"InternalToponymInfo":{

"geoid":44,

"houses":0,

"Point":{

"type":"Point",

"coordinates":[

53.123, 

56.345

]

}

}, координаты - [53.123, 56.345]

!! Если параметры или заголовки запроса будут неверными, будет получен ответ в виде: {"csrfToken":"<csrfToken>","error":{"code":403,"message":"Invalid csrf token"}}
